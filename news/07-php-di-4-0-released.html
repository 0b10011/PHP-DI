<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>PHP-DI - The Dependency Injection Container for humans</title>
    <meta name="description" content="PHP-DI is a Dependency Injection Container for PHP that intends to be practical and powerful">

    <link rel="canonical" href="http://php-di.org" />

            <link href="http://php-di.org/css/bootstrap-theme_venera.min.css" media="all" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Abel:400|Oswald:300,400,700" media="all" rel="stylesheet" type="text/css">
        <link href="http://php-di.org/css/highlight.github.css" rel="stylesheet">
        <link href="http://php-di.org/css/custom.css" rel="stylesheet">
    
    <script>
        if (window.location.href.indexOf('http://mnapoli.fr') === 0) {
            window.location.href = 'http://php-di.org';
        }
    </script>
</head>
<body>

    <header id='header'>
        <div class='navbar navbar-fixed-top'>
            <div class='navbar-inner'>
                <div class='container'>
                    <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                    </a>
                    <a href="http://php-di.org/index.html" class="brand">PHP-DI</a>

                    <div class='nav-collapse subnav-collapse collapse pull-right' id='top-navigation'>
                        <ul class='nav'>
                            <li><a href="http://php-di.org/">Home</a></li>
                            <li><a href="http://php-di.org/news/">News</a></li>
                            <li><a href="http://php-di.org/doc/getting-started.html">Getting started</a></li>
                            <li><a href="http://php-di.org/doc/">Documentation</a></li>
                            <li><a href="http://php-di.org/change-log.html">Change log</a></li>
                            <li><a href="http://php-di.org/support.html">Support</a></li>
                            <li><a href="https://github.com/mnapoli/PHP-DI"><i class="icon-github"></i> Github</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    
    <section class='section-wrapper post-w'>
        <div class='container'>
            <div class='row'>

                <div class='span8'>

                    
    <div class='single-post-w'>
        <h1 class='post-title'>PHP-DI 4.0 released</h1>

        <p class='post-info'>
            <span class='info-item'>
              Posted by Matthieu Napoli
            </span>
            <span class='info-item'>February 1st 2014</span>
        </p>
        <div class='post-content'>
            <p>I am extremely happy to announce that, after 4 months of work and more than 150 commits, PHP-DI version 4.0 has been released!</p>
<p>This is a new major release, and it delivers. As indicated by "major release", it comes with BC breaks, but this is for the better.</p>
<p><em>PHP-DI 3.x users: BC-breaks are detailed in the <a href="../change-log.html">change log</a>, read the <a href="../doc/migration/4.0.html">migration guide from 3.x to 4.0</a>.</em></p>
<h2>What's new?</h2>
<h3>Completely new definition format</h3>
<p>PHP-DI 3.x offered several definition formats, such as:</p>
<ul>
<li>autowiring (use of reflection)</li>
<li>annotations</li>
<li>YAML</li>
<li>PHP array</li>
<li>various undocumented, unstable formats (XML, JSON)â€¦</li>
</ul>
<p>PHP-DI 4.0 now offers:</p>
<ul>
<li>autowiring (unchanged)</li>
<li>annotations (very few changes)</li>
<li>PHP definitions</li>
</ul>
<p>The last one is completely new, and is the result of several months of brainstorming and trials.
It is meant to be much more powerful and simpler to write and understand.</p>
<p>You can read more about <a href="06-php-di-4-0-new-definitions.html">why the definition format has changed</a>.</p>
<h3>Container methods</h3>
<p>The container now offers new methods in addition to <code>get($id)</code>:</p>
<ul>
<li><code>has($id)</code> will return <code>true</code> or <code>false</code> depending on if the container can provide the entry.</li>
</ul>
<p>This method is also useful to make PHP-DI comply with future standards, and to improve container interoperability
(most containers have this method).</p>
<ul>
<li><code>make($id, $params = [])</code> will <strong>create</strong> a new instance of the service using the given parameters.</li>
</ul>
<p>Missing parameters are provided by the container. This is essentially the same as <code>get()</code>, except it ignores
the singleton scope.</p>
<p>This method makes the container work like a factory, so a new <code>FactoryInterface</code> has been introduced so that
you can type-hint against the interface and not couple yourself to the container.</p>
<h3>Framework integration</h3>
<p>PHP-DI now works with Symfony 2 and Zend Framework 1 &amp; 2!</p>
<p>It is actually pretty easy making PHP-DI work with any other framework, feel free to start a discussion
about your favorite framework on GitHub.</p>
<h3>Container interoperability</h3>
<p>PHP-DI 4 has been thought so that it could work hand in hand with <strong>other</strong> containers.
For example, in the Symfony 2 integration, PHP-DI works perfectly along Symfony's native container.</p>
<p>PHP-DI also participates in the <a href="https://github.com/container-interop/container-interop">Container Interop</a> initiative.
This group aims to provide interfaces that will help making different containers and frameworks work together.
While Container Interop has not released a stable version yet, PHP-DI is ready and will probably use it in v4.1.</p>
<h3>Better documentation</h3>
<p>Documentation is extremely important and a great care has been taken to:</p>
<ul>
<li>update the documentation following the new major release</li>
<li>improve the existing documentation and make it more readable</li>
</ul>
<h3>Code quality</h3>
<p>This new major version also comes with even more code quality.</p>
<ul>
<li>Better architecture</li>
</ul>
<p>A large part of the internals of PHP-DI has been rewritten for this new version. The core is now much more maintainable,
testable and extensible. Adding new features should be easier, and many edge cases that couldn't supported in 3.* are now fixed.</p>
<ul>
<li>Code coverage</li>
</ul>
<p>Functional tests have been removed from the code coverage reports, so that only unit tests are taken into account.
Furthermore, every unit test uses the <a href="http://phpunit.de/manual/3.7/en/appendixes.annotations.html#appendixes.annotations.covers"><code>@covers</code> annotation</a> from PHPUnit.</p>
<p>This allows to have a much more realistic and useful code coverage report. To give you an idea, the code coverage
<strong>dropped from 91% to 60%</strong>! A lot of work has been put into testing, and now the code coverage is back up to more than 85%.</p>
<ul>
<li>Scrutinizer-CI</li>
</ul>
<p>The overall Scrutinizer-CI index went from <strong>7.9</strong> to <strong>9.0</strong>! Most issues have been fixed:</p>
<p><img alt="Scrutinizer report" src="scrutinizer-issues.png" /></p>
<h3>Many small improvements</h3>
<p>PHP-DI 4 comes with many small improvements too, and rather than list them all, you can see them in the <a href="../change-log.html">change log</a>.</p>
<h2>Installing PHP-DI 4.0</h2>
<p>Just require <code>"mnapoli/php-di"</code> and <a href="../doc/getting-started.html">get started</a>.</p>
<p>Already using PHP-DI 3? Then edit your composer configuration:</p>
<pre><code class="language-json">{
    "require": {
        "mnapoli/php-di": "~4.0"
    }
}</code></pre>
<p>and run <code>composer update</code>.</p>
<p>You can also read the <a href="../doc/migration/4.0.html">migration guide from 3.x to 4.0</a>.</p>
<h2>Change log</h2>
<p>You can also read the complete <a href="../change-log.html">change log</a>.</p>
        </div>
    </div>

    <div class='post-comments-w'>
        <h3 class='section-header'>
            Comments
        </h3>
        <div id="disqus_thread"></div>
        <noscript>
            Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
    </div>


                </div>

                <div class='span4'>
                    <div class='blog-side-bar'>

                        <div class='blog-categories widget-tp'>
                            <h3>
                                <i class='icon-th-list'></i>
                                All posts
                            </h3>
                            <ul>
                                <li>
                                    <a href="http://php-di.org/news/13-php-di-4-4-released.html">PHP-DI 4.4 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/12-php-di-is-better-with-php-5-6.html">PHP 5.6 is out and PHP-DI just got better</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/11-php-di-4-3-released.html">PHP-DI 4.3 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/10-php-di-4-2-released.html">PHP-DI 4.2 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/09-php-di-4-1-released.html">PHP-DI 4.1 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/08-10000-installs.html">10.000 installs!</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/07-php-di-4-0-released.html">PHP-DI 4.0 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/06-php-di-4-0-new-definitions.html">What will change in PHP-DI 4: the new definition format</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/05-php-di-3-5.html">PHP-DI 3.5 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/04-php-di-3-4.html">PHP-DI 3.4 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/03-php-di-3-3.html">PHP-DI 3.3 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/02-php-di-3-2.html">PHP-DI 3.2 released</a>
                                </li>
                                <li>
                                    <a href="http://php-di.org/news/01-php-di-3-1.html">PHP-DI 3.1 released</a>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>


            <footer>
            <div class='pre-footer'>
                <div class='container'>
                    <p>
                        <strong>Unsatisfied with the documentation?</strong>
                        Please let us know, <a href="https://github.com/mnapoli/PHP-DI/issues/new">create an issue</a>,
                        we will greatly appreciate it.
                        You can chat with us on
                        <a href="https://twitter.com/phpdi">Twitter</a> or
                        <a href="https://gitter.im/mnapoli/PHP-DI">Gitter chat</a> too.
                    </p>
                </div>
            </div>
            <div class='deep-footer'>
                <div class='container'>
                    <div class='copyright'>
                        Copyright &copy; 2014 <a href="http://mnapoli.fr/">Matthieu Napoli</a>
                        Website generated with
                        <a href="http://mnapoli.fr/Couscous/" target="_blank">Couscous</a>.
                    </div>
                </div>
            </div>
        </footer>
    
                <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
        <script src="http://php-di.org/js/template.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                $("section>p:first-child").addClass('lead');
                hljs.initHighlightingOnLoad();
            });
        </script>
    

    <script>
        // Disqus comments
        var disqus_shortname = 'phpdi';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>

    <script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-15584647-13']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <!-- Piwik -->
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
        _paq.push(["setCookieDomain", "*.php-di.org"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.mnapoli.fr/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', 2]);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
            g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <noscript><p><img src="http://piwik.mnapoli.fr/piwik.php?idsite=2" style="border:0;" alt="" /></p></noscript>
    <!-- End Piwik Code -->
</body>
</html>
